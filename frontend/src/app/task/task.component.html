<div class="container">


  <!-- Icons above the tasks -->
  <div class="text-end mb-3">
    <div class="button-container">
      <button
        title="Add New Task"
        class="modern-icon-button"
        (click)="openTaskModal()"
      >
        <span class="icon">+</span>
        <span class="tooltip">Add New Task</span>
      </button>

      <button
        title="See Progress"
        class="modern-icon-button"
        (click)="openProgressModal()"
      >
        <span class="icon">📊</span>
        <span class="tooltip">See Progress</span>
      </button>
    </div>

  </div>
  <div *ngFor="let task of tasks" class="card shadow-sm mb-4 rounded-4">
    <div class="card-body d-flex justify-content-between align-items-start p-4">
      <div>
        <h5 class="card-title mb-1">{{ task.title }}</h5>
        <p class="mb-2 text-muted small">Due: {{ task.dueDate }}</p>
        <span
          class="badge px-3 py-2"
          [ngClass]="{
            'bg-success': task.completed,
            'bg-warning text-dark': !task.completed
          }"
        >
          {{ task.completed ? '✅ Completed' : '⌛ In Progress' }}
        </span>
      </div>

      <div class="d-flex flex-column gap-2">
        <button
          class="btn btn-outline-primary btn-sm"
          (click)="editTask(task.id)"
          title="Edit Task"
        >
          📝
        </button>
        <button
          class="btn btn-outline-danger btn-sm"
          (click)="deleteTask(task.id)"
          title="Delete Task"
        >
          🗑️
        </button>
      </div>
    </div>
  </div>

  <!-- Overlay Modal -->
  <div *ngIf="showProgressModal" class="modal-overlay">
    <div class="modal-content shadow-lg rounded-3">
      <!-- Modal Header -->
      <div class="modal-header">
        <h5 class="modal-title text-primary fw-bold">📊 Progress Overview</h5>
        <button type="button" class="btn-close" (click)="closeProgressModal()" aria-label="Close"></button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body">
        <app-progress [studyGroupId]="studyGroupId"></app-progress>
      </div>

      <!-- Modal Footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary px-4 py-2" (click)="closeProgressModal()">Close</button>
      </div>
    </div>
  </div>

  <!-- Overlay Modal for Adding Tasks -->
  <div *ngIf="showTaskModal" class="modal-overlay">
    <div class="modal-content shadow-lg rounded-3">
      <!-- Modal Header -->
      <div class="modal-header">
        <h5 class="modal-title text-primary fw-bold">➕ Add New Task</h5>
        <button type="button" class="btn-close" (click)="closeTaskModal()" aria-label="Close"></button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body">
        <app-add-task [studyGroupId]="studyGroupId"></app-add-task>
      </div>

      <!-- Modal Footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary px-4 py-2" (click)="closeTaskModal()">Close</button>
      </div>
    </div>
  </div>

<!--  <div class="text-center mt-5 d-flex justify-content-center gap-3 flex-wrap">-->
<!--    <button class="btn btn-primary btn-lg px-4 py-2 rounded-pill" style="background-color: #0d6efdcc;" routerLink="/task/add">-->
<!--      ➕ Add New Task-->
<!--    </button>-->
<!--    <button class="btn btn-outline-secondary btn-lg px-4 py-2 rounded-pill" routerLink="/progress">-->
<!--      📈 See Progress-->
<!--    </button>-->
<!--  </div>-->
</div>
